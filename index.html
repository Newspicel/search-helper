<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Search Helper</title>
    <script type="text/javascript">
      window.addEventListener("load", function () {
        // Theme
        if (window.localStorage.getItem("theme") == "light") {
          document.body.className = "light";
          themeElement.value = "light";
        } else {
          document.body.className = "dark";
          themeElement.value = "dark";
        }
      });
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <input
      type="text"
      id="search"
      placeholder="Search..."
      autocomplete="off"
      autocorrect="off"
      autofocus
    />
    <div id="options">
      <!-- <select id="language" style="height: 2em; width: 15em; margin-left: 2%; padding: 0.1;">
        <option value="german">Deutsch</option>
        <option value="english">English</option>
      </select>-->
      <select id="theme" style="height: 2em; width: 15em; margin-left: 2%; padding: 0.1;">
        <option value="light">Light</option>
        <option value="dark">Dark</option>
      </select>

      <button id="copy-button" type="button" style="height: 2em; width: 8em;">Copy URL</button>
    </div>
    <br />
    <div id="search-info" style="text-align: center; font-size: medium">
      Type to search
    </div>
    <div id="search-results" style="margin: 1.5em;"></div>

    <footer style="text-align: center;">
      <p>
        &copy; 2021
        <a href="https://twitter.com/newspicel" target="_blank">Newspicel</a>
      </p>
      <a href="https://github.com/newspicel/search-helper" target="_blank"
        ><img
          alt="GitHub Repo stars"
          src="https://img.shields.io/github/stars/newspicel/search-helper?style=social"
      /></a>
    </footer>

    <script text="text/javascript" src="engines.js"></script>
    <script text="text/javascript" src="search.js"></script>

    <script text="text/javascript">
      var buttonElement = document.getElementById("copy-button");

      buttonElement.addEventListener("click", function () {
        var search = document.getElementById("search").value;

        if (search.length > 0) {
          navigator.clipboard.writeText(
            "https://search.newspicel.dev?q=" + decodeURIComponent(search)
          );
        }
      });

      window.addEventListener("keydown", function (e) {
        var search = document.getElementById("search");
        if (e.keyCode === 13 && search.value.length > 0) {
          search.blur();
          search.value = "";
          search.focus();
          search.select();
          search.click();
        }
        search.focus();

        searchEngine(search.value);
      });

      var themeElement = document.getElementById("theme");

      themeElement.addEventListener("input", function () {
        var theme = document.getElementById("theme").value;
        console.log(theme);
        if (theme == "light") {
          document.body.className = "light";
          window.localStorage.setItem("theme", "light");
        } else {
          document.body.className = "dark";
          window.localStorage.setItem("theme", "dark");
        }
      });
    </script>
  </body>
</html>
